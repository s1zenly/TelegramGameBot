-import telebot
from telebot.util import pil_image_to_file
import config
import random

from telebot import ExceptionHandler, types
 
bot=telebot.TeleBot(config.token)


#–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞—á–∞–ª–∞
@bot.message_handler(commands=['start'])
def privet(message):
 #–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
     markup=types.ReplyKeyboardMarkup(resize_keyboard=True)
     one=types.KeyboardButton("üé≤–ß–∏—Å–ª–æ–º–µ–Ω")
     two=types.KeyboardButton("üé´–ö–∞–º–µ–Ω—å,–Ω–æ–∂–Ω–∏—Ü—ã,–±—É–º–∞–≥–∞")
     three=types.KeyboardButton("üéØ–£–≥–∞–¥–∞–π–∫–∞")

     markup.add(one,two,three)

     sti=open('stic/qw.tgs','rb')
     
     bot.send_animation(message.chat.id,sti)
     bot.send_message(message.chat.id,'---------------------–ü—Ä–∏–≤–µ—Ç!---------------------\n             \U0001f600—è –±–æ—Ç–∏–∫-–∏–≥—Ä—É—à–∫–∞\U0001f600 \n            –≤—ã–±–∏—Ä–∞–π –∏–≥—Ä—É –∏–∑ —Å–ø–∏—Å–∫–∞',reply_markup=markup)
     bot.send_message(message.chat.id,'''E—Å–ª–∏ —Ö–æ—á–µ—à—å –ø—Ä–æ—á–µ—Å—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä
             –≤–≤–µ–¥–∏ –∫–æ–º–∞–Ω–¥—É /help''')

#–û–±—Ä–∞–±–æ—Ç–∏—á–∫ –ø—Ä–∞–≤–∏–ª –∏–≥—Ä
@bot.message_handler(commands=['help'])
def help(message):
      bot.send_message(message.chat.id,'''-------------*–ü—Ä–∞–≤–∏–ª–∞*-------------
      1)*–ß–∏—Å–ª–æ–º–µ–Ω*
              –ò–≥—Ä–∞,–≤ –∫–æ—Ç–æ—Ä—ã–π –º—ã –æ–±–º–µ–Ω–∏–≤–∞–µ–º—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —á–∏—Å–ª–∞–º–∏ –∏ —Ç–æ—Ç,—É –∫–æ–≥–æ –±–æ–ª—å—à–µ —á–∏—Å–ª–æ,–æ–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–±–µ–¥—É,—Å—á–µ—Ç —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è
      2)*–ö–∞–º–µ–Ω—å,–Ω–æ–∂–Ω–∏—Ü—ã,–±—É–º–∞–≥–∞*
             –í—Å–µ–º –∑–Ω–∞–∫–æ–º–∞—è –∏–≥—Ä–∞,–≤ –∫–æ—Ç–æ—Ä—ã–π –º—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–∏—Å—ã–ª–∞–µ–º —Å–ª–æ–≤–æ –∏ —Ñ–∏–∫—Å–∏—Ä—É–µ–º —Å—á–µ—Ç
      3)*–£–≥–∞–¥–∞–π–∫–∞*
             –ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ—é –∏–Ω—Ç—É–∏—Ü–∏—é –∏ —É–≥–∞–¥–∞–π –∫–∞–∫–æ–µ —á–∏—Å–ª–æ —è –∑–∞–≥–∞–¥–∞–ª,–µ—Å–ª–∏ —É–≥–∞–¥–∞–µ—à—å 5+ –∏–∑ 10,—Ç–æ —Ç—ã –æ–¥–µ—Ä–∂–∞–ª –ø–æ–±–µ–¥—É ''',parse_mode='Markdown')

#–ò–≥—Ä—ã
@bot.message_handler(content_types=['text'])
def game(message):
    if message.chat.type=="private":
           if message.text=='üé´–ö–∞–º–µ–Ω—å,–Ω–æ–∂–Ω–∏—Ü—ã,–±—É–º–∞–≥–∞': 
                   msg = bot.send_message(message.chat.id, '–ñ—É–ª—å–Ω–∏—á–∞—Ç—å –Ω–µ –±—É–¥—É\U0001f600', reply_markup=types.ReplyKeyboardRemove())
                   markup=types.ReplyKeyboardMarkup(resize_keyboard=True)
                   y=types.KeyboardButton("üìÑ–±—É–º–∞–≥–∞")
                   g=types.KeyboardButton("üóª–∫–∞–º–µ–Ω—å")
                   e=types.KeyboardButton("‚úÇÔ∏è–Ω–æ–∂–Ω–∏—Ü—ã")
                   stop=types.KeyboardButton("‚õîÔ∏è—Å—Ç–æ–ø") 
                   markup.add(y,g,e,stop)
               
                   bot.send_message(message.chat.id,'–¢–≤–æ–π —Ö–æ–¥!',reply_markup=markup) 

                   bot.register_next_step_handler(msg,KNB)               
           elif message.text=='üé≤–ß–∏—Å–ª–æ–º–µ–Ω':
                   top=bot.send_message(message.chat.id,'–∏–≥—Ä–∞–µ–º –≤ –¥–∏–∞–ø–æ–∑–æ–Ω–µ (0.1000)\U0001f600',reply_markup=types.ReplyKeyboardRemove())

                   markup=types.ReplyKeyboardMarkup(resize_keyboard=True)
                   st=types.KeyboardButton('‚õîÔ∏è—Å—Ç–æ–ø')

                   markup.add(st)

                   bot.send_message(message.chat.id,'–í–≤–µ–¥–∏ —á–∏—Å–ª–æ!',reply_markup=markup)

                   bot.register_next_step_handler(top,chislomen)
           elif message.text=='üéØ–£–≥–∞–¥–∞–π–∫–∞':
                   ket=bot.send_message(message.chat.id,'–ù—É —á—Ç–æ,–≥–æ—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ—é –∏–Ω—Ç—É—Ü–∏—é?üòé',reply_markup=types.ReplyKeyboardRemove())

                   markup=types.ReplyKeyboardMarkup(resize_keyboard=True)
                   ed=types.KeyboardButton('1')
                   dv=types.KeyboardButton('2')
                   tr=types.KeyboardButton('3') 
                   chet=types.KeyboardButton('4') 
                   piat=types.KeyboardButton('5') 
                   shest=types.KeyboardButton('6')
                   sem=types.KeyboardButton('7') 
                   vos=types.KeyboardButton('8') 
                   dev=types.KeyboardButton('9') 
                   des=types.KeyboardButton('10') 
                   xv=types.KeyboardButton('‚õîÔ∏è—Å—Ç–æ–ø')

                   markup.add(ed,dv,tr,chet,piat,shest,sem,vos,dev,des,xv)

                   bot.send_message(message.chat.id,'–ü–æ–±–µ–¥–∞ –∑–∞ —Ç–æ–±–æ–π,–µ—Å–ª–∏ –æ—Ç–≥–∞–¥–∞–µ—à—å 5+\\10!üí∞',reply_markup=markup)

                   bot.register_next_step_handler(ket,ugadayka)
           else:
                   bot.send_message(message.chat.id,'–Ø –Ω–µ –∑–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω —Ç–∞–∫,—Ç—ã –¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–∞—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞ –Ω–∏–∂–µüòä')


global k,t
k=t=0
#–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–≥—Ä—ã '–∫–∞–º–µ–Ω—å,–Ω–æ–∂–Ω–∏—Ü—ã,–±—É–º–∞–≥–∞'
def KNB(message):
           if message.chat.type=="private":
                  if message.text=='üóª–∫–∞–º–µ–Ω—å' or message.text=='üìÑ–±—É–º–∞–≥–∞' or message.text=='‚úÇÔ∏è–Ω–æ–∂–Ω–∏—Ü—ã':  
                        global k,t 
                        p=['–∫–∞–º–µ–Ω—å','–Ω–æ–∂–Ω–∏—Ü—ã','–±—É–º–∞–≥–∞']
                        y=random.randint(0,2)
                        bot.send_message(message.chat.id,p[y])
                        #—Å—á–µ—Ç
                        if (p[y]=='–±—É–º–∞–≥–∞' and message.text=='üóª–∫–∞–º–µ–Ω—å')or(p[y]=='–∫–∞–º–µ–Ω—å' and message.text=='‚úÇÔ∏è–Ω–æ–∂–Ω–∏—Ü—ã')or(p[y]=='–Ω–æ–∂–Ω–∏—Ü—ã' and message.text=='üìÑ–±—É–º–∞–≥–∞'):
                               t+=1
                               qwert=bot.send_message(message.chat.id,f'-–Ø-      -—Ç—ã-\n|{t}   :    {k}|')      
                               bot.register_next_step_handler(qwert,KNB)
                        else:
                              if (p[y]=='–∫–∞–º–µ–Ω—å' and message.text=='üìÑ–±—É–º–∞–≥–∞')or(p[y]=='–Ω–æ–∂–Ω–∏—Ü—ã' and message.text=='üóª–∫–∞–º–µ–Ω—å')or(p[y]=='–±—É–º–∞–≥–∞' and message.text=='‚úÇÔ∏è–Ω–æ–∂–Ω–∏—Ü—ã'):
                                    k+=1
                              qwert1=bot.send_message(message.chat.id,f'-–Ø-      -—Ç—ã-\n|{t}   :    {k}|')
                              bot.register_next_step_handler(qwert1,KNB)

                  elif message.text=='‚õîÔ∏è—Å—Ç–æ–ø':
                   t=k=0  
                   markup=types.ReplyKeyboardMarkup(resize_keyboard=True)

                   one=types.KeyboardButton("üé≤–ß–∏—Å–ª–æ–º–µ–Ω")
                   two=types.KeyboardButton("üé´–ö–∞–º–µ–Ω—å,–Ω–æ–∂–Ω–∏—Ü—ã,–±—É–º–∞–≥–∞")
                   three=types.KeyboardButton("üéØ–£–≥–∞–¥–∞–π–∫–∞")

                   markup.add(one,two,three)

                   ytr=bot.send_message(message.chat.id,'–≤–æ–∑–≤—Ä–∞—â–∞—é,–≤—ã–±–∏—Ä–∞–π...üòä',reply_markup=markup)
 
                   bot.register_next_step_handler(ytr,game)

                  else:
                        bot.send_message(message.chat.id,'–ü—Ä–æ—Å—Ç–∏,—è –Ω–µ –∑–Ω–∞—é —á—Ç–æ —Ç–µ–±–µ –æ—Ç–≤–µ—Ç–∏—Ç—åüòû')  


global q,l  
q=l=0         
#–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–≥—Ä—ã '–ß–∏—Å–ª–æ–º–µ–Ω'                         
def chislomen(message):
      if message.chat.type=="private":
            if message.text=='‚õîÔ∏è—Å—Ç–æ–ø':
                   global q,l
                   q=l=0
                   markup=types.ReplyKeyboardMarkup(resize_keyboard=True)

                   one=types.KeyboardButton("üé≤–ß–∏—Å–ª–æ–º–µ–Ω")
                   two=types.KeyboardButton("üé´–ö–∞–º–µ–Ω—å,–Ω–æ–∂–Ω–∏—Ü—ã,–±—É–º–∞–≥–∞")
                   three=types.KeyboardButton("üéØ–£–≥–∞–¥–∞–π–∫–∞")

                   markup.add(one,two,three)

                   ytr=bot.send_message(message.chat.id,'–≤–æ–∑–≤—Ä–∞—â–∞—é,–≤—ã–±–∏—Ä–∞–π...üòä',reply_markup=markup)
 
                   bot.register_next_step_handler(ytr,game)               
            else:
                  
                  try:
                        
                        pol=int(message.text)
                        if pol>1000:
                              mon=bot.send_message(message.chat.id,'–ñ—É–ª—å–Ω–∏—á–∞—Ç—å –Ω–µ—Ö–æ—Ä–æ—à–æ!üò°') 
                              bot.register_next_step_handler(mon,chislomen)  
                        else:           
                              we=random.randint(0,1000)
                              bot.send_message(message.chat.id,we)
                              if we>pol :
                                    l+=1
                                    pol=bot.send_message(message.chat.id,f'-–Ø-      -—Ç—ã-\n|{l}   :    {q}|')
                                    bot.register_next_step_handler(pol,chislomen)
                              else:
                                    if pol>we:
                                          q+=1
                                    pod=bot.send_message(message.chat.id,f'-–Ø-      -—Ç—ã-\n|{l}   :    {q}|')
                                    bot.register_next_step_handler(pod,chislomen)
                  except ValueError as pol:
                        bot.send_message(message.chat.id,'–ü—Ä–æ—Å—Ç–∏,–Ω–æ —Ç—ã –≤–≤–µ–ª –Ω–µ —á–∏—Å–ª–æ –∏–ª–∏ –Ω–µ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æüòû')

global m
m=a=0
#–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–≥—Ä—ã '–£–≥–∞–¥–∞–π–∫–∞'
def ugadayka(message):
      if message.chat.type=='private':
            if message.text=='‚õîÔ∏è—Å—Ç–æ–ø':
                   global m,a
                   m=0
                   markup=types.ReplyKeyboardMarkup(resize_keyboard=True)

                   one=types.KeyboardButton("üé≤–ß–∏—Å–ª–æ–º–µ–Ω")
                   two=types.KeyboardButton("üé´–ö–∞–º–µ–Ω—å,–Ω–æ–∂–Ω–∏—Ü—ã,–±—É–º–∞–≥–∞")
                   three=types.KeyboardButton("üéØ–£–≥–∞–¥–∞–π–∫–∞")

                   markup.add(one,two,three)

                   ytr=bot.send_message(message.chat.id,'–≤–æ–∑–≤—Ä–∞—â–∞—éüòä',reply_markup=markup)
 
                   bot.register_next_step_handler(ytr,game)
            else: 
                  if (message.text=='1' or message.text=='2' or message.text=='2' or message.text=='3' or message.text=='4' or message.text=='5' or message.text=='6' or message.text=='7' or message.text=='8' or message.text=='9'or message.text=='10'):
                        a+=1
                        sr=int(message.text)
                        ran=random.randint(1,10)
                        bot.send_message(message.chat.id,ran)
                        if(a!=10):
                              if sr==ran:
                                    m+=1
                              rety=bot.send_message(message.chat.id,f'C—á—ë—Ç:{m}\\10') 
                              bot.register_next_step_handler(rety,ugadayka) 
                        else:
                              a=0
                              if(m>=5):
                                    bot.send_message(message.chat.id,f'C—á—ë—Ç:{m}\\10') 
                                    final=bot.send_message(message.chat.id,'–ú–æ–ª–æ–¥–µ—Ü,—Ç—ã –º–µ–Ω—è –ø–æ–±–µ–¥–∏–ªüèÖ') 
                                    bot.register_next_step_handler(final,clava)   
                              else:
                                    bot.send_message(message.chat.id,f'C—á—ë—Ç:{m}\\10') 
                                    ura=bot.send_message(message.chat.id,'–ö–∞–∫ —è —Ç–µ–±—è —Å–¥–µ–ª–∞–ªüòé')
                                    bot.register_next_step_handler(ura,clava)
                  else:
                       asd=bot.send_message(message.chat.id,'–ü—Ä–æ—Å—Ç–∏,–Ω–æ —Ç—ã –≤–≤–µ–ª –Ω–µ —á–∏—Å–ª–æ –∏–ª–∏ –Ω–µ –∏–∑ –¥–∏–∞–ø–æ–∑–æ–Ω–∞üòû')
                       bot.register_next_step_handler(asd,ugadayka)

def clava(message):
      markup=types.ReplyKeyboardMarkup(resize_keyboard=True)
      one=types.KeyboardButton("üé≤–ß–∏—Å–ª–æ–º–µ–Ω")
      two=types.KeyboardButton("üé´–ö–∞–º–µ–Ω—å,–Ω–æ–∂–Ω–∏—Ü—ã,–±—É–º–∞–≥–∞")
      three=types.KeyboardButton("üéØ–£–≥–∞–¥–∞–π–∫–∞")

      markup.add(one,two,three)
    
      bot.send_message(message.chat.id,'–í—ã–±–∏—Ä–∞–π –∑–∞–Ω–æ–≤–æüòä',reply_markup=markup)
      
      

bot.polling(none_stop=True)